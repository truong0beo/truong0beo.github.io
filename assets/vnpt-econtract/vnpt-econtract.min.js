!function(n,e){"object"==typeof exports&&"underfind"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):n.VNPTeContract=e()}(this,function(){"use strict";var n=function(n){const e="https://econtract-poc.vnptit3.vn",o=e+"/wv/login",t="NORMAL",c="ONLY_DETAIL";var l,i,a={};return n.init=function(o=null){o,window.addEventListener("message",function(o){console.log("-------------------"),console.log("You have message: ",o),console.log("Origin: ",o.origin),console.log("-------------------"),o.origin!=e?console.log("VNPT eContract: có tin đến và không đúng origin!"):n.callBackEndSign(o.data)},!1),console.log("Inited handle message.")},n.close=function(){},n.open=function(e=null){a.accessToken=e.accessToken||"",a.contractId=e.contractId||"",a.action=e.action||"",a.clientId=e.clientId||"",a.clientSecret=e.clientSecret||"",a.loginType=e.loginType||"",a.flowType=e.flowType||t||"",a.lang=e.lang||"",e.flowType!=c||e.contractId?function(e){let o=window.screen.availHeight-100,t=window.screen.availWidth-150;l=window.open(e,"targetWindow",`toolbar=no,\n            location=no,\n            status=no,\n            menubar=no,\n            scrollbars=yes,\n            resizable=yes,\n            width=${t},\n            height=${o}`),clearInterval(i),null!=l&&null!=l&&(i=setInterval(function(){l.closed&&(console.log("window popup is closed"),n.callBackEndSign({status:"CANCEL"}),clearInterval(i))},500))}(o+"?accessToken="+a.accessToken+"&contractId="+a.contractId+"&action="+a.action+"&clientId="+a.clientId+"&clientSecret="+a.clientSecret+"&loginType="+a.loginType+"&flowType="+a.flowType+"&lang="+a.lang):n.callBackEndSign({status:"ERROR",message:"Lỗi flowType (ONLY_DETAIL): Không tìm thấy contractId"})},n.generateURL=function(e=null){if(a.accessToken=e.accessToken||"",a.contractId=e.contractId||"",a.action=e.action||"",a.clientId=e.clientId||"",a.clientSecret=e.clientSecret||"",a.loginType=e.loginType||"",a.flowType=e.flowType||t||"",a.lang=e.lang||"",e.flowType!=c||e.contractId)return o+"?accessToken="+a.accessToken+"&contractId="+a.contractId+"&action="+a.action+"&clientId="+a.clientId+"&clientSecret="+a.clientSecret+"&loginType="+a.loginType+"&flowType="+a.flowType+"&lang="+a.lang;n.callBackEndSign({status:"ERROR",message:"Lỗi flowType (ONLY_DETAIL): Không tìm thấy contractId"})},n.getAccessToken=function(){return a.accessToken||""},n.callBackEndSign=function(n){},n}(n||{});return n});